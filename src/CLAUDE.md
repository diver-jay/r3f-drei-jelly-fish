<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 19, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #625 | 9:49 AM | ğŸŸ£ | Jellyfish physics geometry rendering integrated with React Three Fiber | ~369 |
| #623 | " | âœ… | Added React Three Fiber hooks for animation and refs | ~211 |
| #619 | 9:39 AM | ğŸŸ£ | Physics geometry foundation implemented for jellyfish simulation | ~629 |
| #618 | " | ğŸŸ£ | Implemented createCore physics spine structure for jellyfish | ~534 |
| #617 | 9:34 AM | ğŸŸ£ | Jellyfish physics scaffolding and helper functions implemented | ~433 |
| #613 | 9:23 AM | ğŸ”µ | React Three Fiber app structure for jellyfish project | ~178 |
</claude-mem-context>

---

# Jellyfish â€” êµ¬í˜„ í˜„í™© & ë‹¤ìŒ ë‹¨ê³„

> ì›ë³¸ ë ˆí¼ëŸ°ìŠ¤: `/home/junhonglee/projects/particulate-medusae/static/js/items/Medusae.js`

## âœ… ì™„ë£Œëœ êµ¬í˜„

| ìš”ì†Œ | íŒŒì¼ | ì„¸ë¶€ ë‚´ìš© |
|---|---|---|
| Core ë¬¼ë¦¬ ìŠ¤ì¼ˆë ˆí†¤ | `Jellyfish.jsx / createCore()` | 8ê°œ íŠ¹ìˆ˜ íŒŒí‹°í´, spine DistanceConstraint Ã— 4, AxisConstraint Ã— 1 |
| Bell (Bulb) ë¬¼ë¦¬ | `Jellyfish.jsx / createBulb()` | 20 ribs Ã— 36 segments, outer/inner/skin/spine constraints |
| Bell ì• ë‹ˆë©”ì´ì…˜ | `Jellyfish.jsx / updateRibs()` | phase ê¸°ë°˜ constraint ê±°ë¦¬ ë™ì  ë³€ê²½ â†’ í„ì‹± ëª¨ì…˜ |
| BulbShaderMaterial | `shaders/BulbShaderMaterial.js`, `glsl/bulb.*` | UV íŒ¨í„´ íˆ¬ëª…ë„, oscillate/accumulate, time-animated, í•‘í¬â†”í¼í”Œ |
| GelShaderMaterial | `shaders/GelShaderMaterial.js`, `glsl/gel.*` | rim-based ê¸€ë¡œìš°, íŒŒë€ ì™¸ê³½ faint ë ˆì´ì–´ |
| Bloom í¬ìŠ¤íŠ¸í”„ë¡œì„¸ì‹± | `Experience.jsx` | `@react-three/postprocessing` Bloom (intensity 2, threshold 0.1) |
| positionPrev ì„œë¸Œí”„ë ˆì„ lerp | `bulb.vert`, `gel.vert` | stepProgress uniformìœ¼ë¡œ prevâ†”current ë³´ê°„ |

---

## ğŸ”œ ë‹¤ìŒ êµ¬í˜„ ìˆœì„œ (ì›ë³¸ Medusae.js ê¸°ì¤€)

### Phase 2 â€” Tail (ì„œë¸Œ-ìš°ì‚°, ì¢… ì•„ë˜ìª½ ì‚´)

**ì›ë³¸:** `createTail()` / `createTailRib()` / `createTailSkin()` (lines 460-551)

- **êµ¬ì¡°:** 15ê°œ rib Ã— 36 segments, Bell ë§ˆì§€ë§‰ rib ì•„ë˜ë¶€í„° ì¢ì•„ì§€ëŠ” ê¹”ë•Œê¸° ëª¨ì–‘
- **ë°˜ê²½ ì»¤ë¸Œ:** `tailRibRadius(t) = sin(0.25*t*PI + 0.5*PI) * (1 - 0.9*t)` â†’ ë¹ ë¥´ê²Œ ìˆ˜ì¶•
- **Constraint:** outer `[mainLen*0.9, mainLen*1.5]` (Bellë³´ë‹¤ ëŠìŠ¨ â†’ ì ‘íˆëŠ” í˜•íƒœ), inner ì‚¼ê°, skin
- **ë§ˆì§€ë§‰ rib:** `IDX_MID`ì™€ radial spine ì—°ê²°
- **ìƒˆ ì…°ì´ë” í•„ìš”:** `TailShaderMaterial` (`tail-frag.glsl`)
  - `accumulate(uv, ...)` ìˆ˜í‰ ë°´ë”© + sin ë¦¬í”Œ
  - `mix(diffuseB, diffuse, saturation)` â€” ì•ˆìª½ ì–´ë‘ìš´ í¼í”Œ, ë°”ê¹¥ ë°ì€ ë¼ë²¤ë”
  - alpha: `clamp(saturation, 0.2, 1.0) * opacity`
  - ìƒ‰ìƒ: `diffuse = 0xE4BBEE` (ë¼ë²¤ë”), `diffuseB = 0x241138` (ì§„í•œ í¼í”Œ)
  - uniform: `scale = 20`
- **opacity:** meshOpacity Ã— 0.75

---

### Phase 3 â€” Hood Contour Lines (ì™¸ê³½ ì™€ì´ì–´)

**ì›ë³¸:** `createMaterialsLines()` (lines 834-856)

- **êµ¬ì¡°:** `THREE.LineSegments`, Bell rib ë£¨í”„ + skin ì—°ê²°ì„ ë“¤ì„ ì„ ìœ¼ë¡œ ë Œë”
- **ë§í¬ ë²„í¼:** `links` ë°°ì—´ (outer rib loop + skin + ìƒë‹¨ spine radial)
- **ìƒˆ ì…°ì´ë” í•„ìš”:** `TentacleShaderMaterial` (`tentacle-frag.glsl`)
  - `illumination = area / (centerDist * centerDist)` â€” ì¤‘ì‹¬ì—ì„œ ì—­ì œê³± ê°ì‡ 
  - color: `mix(white, diffuse, illumination)` â†’ ì¤‘ì‹¬ í°ìƒ‰, ë©€ìˆ˜ë¡ tinted
  - alpha: `clamp(opacity * illumination^2, 0, opacity)`
  - `area = 1200`
  - ìƒ‰ìƒ: `diffuse = 0xffdde9` (ë”°ëœ»í•œ í•‘í¬-í°)
- **Blending:** AdditiveBlending, depthTest/Write off
- **opacity:** meshOpacity Ã— 0.35

---

### Phase 4 â€” Tentacles (ì´‰ìˆ˜)

**ì›ë³¸:** `createTentacles()` / `createTentacleGroup()` (lines 352-454)

- **êµ¬ì¡°:** 3 ê·¸ë£¹ Ã— 36-particle ë§ ìŠ¤íƒ (`LINE_SEGMENTS` ë Œë”)
  - ê·¸ë£¹ 0: ~120 ì„¸ê·¸ë¨¼íŠ¸, rib 6 anchored
  - ê·¸ë£¹ 1: ~110 ì„¸ê·¸ë¨¼íŠ¸, rib 10 anchored
  - ê·¸ë£¹ 2: ~100 ì„¸ê·¸ë¨¼íŠ¸, rib 14 anchored
- **íŒŒí‹°í´ weight:** `t^3 * 1.25` â€” ëìœ¼ë¡œ ê°ˆìˆ˜ë¡ ì¤‘ë ¥ ì˜í–¥ ì¦ê°€
- **Constraint:** ë§â†”ë§ DistanceConstraint `[dist*0.5, dist]`, ëì€ `PIN_TENTACLE`ì— soft anchor
- **ë Œë”:** `THREE.LineSegments` (ë©´ì´ ì•„ë‹Œ ì„ ), TentacleShaderMaterial ì¬ì‚¬ìš©
  - `area = 2000`, ìƒ‰ìƒ: `diffuse = 0x997299` (ë®¤íŠ¸ í¼í”Œ-ê·¸ë ˆì´)
- **opacity:** meshOpacity Ã— 0.25

---

### Phase 5 â€” Mouth Arms (êµ¬ê°• íŒ”)

**ì›ë³¸:** `createMouth()` / `createMouthArm()` (lines 557-673)

- **êµ¬ì¡°:** 3 ê·¸ë£¹, ê·¸ë£¹ë‹¹ 2~6ê°œ 2D ë¦¬ë³¸ arm (inner chain + outer chain â†’ `quadDoubleSide` ë©´)
  - linkSize ê³µì‹ìœ¼ë¡œ ìœ ê¸°ì  ë¬¼ê²° í”„ë¡œí•„
  - UV: inner `(t, 0)`, outer `(t, 1)`
- **Constraint:** inner chain, outer chain, ì¸¡ë©´ lateral brace, diagonal brace, `PIN_TAIL` soft pin
- **íŒŒí‹°í´ weight:** 0.5 (ì¼ë°˜ì˜ ì ˆë°˜, ë” ìœ ì—°)
- **ë Œë”:** Mesh + TailShaderMaterial (Phase 2ì—ì„œ êµ¬í˜„)
  - `scale = 3` (Tailì˜ 20ê³¼ ë‹¤ë¦„ â€” ë‚®ì€ ì£¼íŒŒìˆ˜ ë°´ë”©)
  - ìƒ‰ìƒ: `diffuse = 0xEFA6F0` (ì—°í•‘í¬-í¼í”Œ), `diffuseB = 0x4A67CE` (íŒŒë‘)
- **opacity:** meshOpacity Ã— 0.65

---

### Phase 6 â€” Ambient Dust (ìˆ˜ì¤‘ íŒŒí‹°í´)

**ì›ë³¸:** `/home/junhonglee/projects/particulate-medusae/static/js/items/Dust.js`

- **êµ¬ì¡°:** ì™„ì „íˆ ë…ë¦½ëœ ì‹œìŠ¤í…œ, 8,000ê°œ ì  íŒŒí‹°í´ 300 unit íë¸Œì— ë¶„ì‚°
- **ìƒˆ ì…°ì´ë” í•„ìš”:** `DustShaderMaterial` (`dust-vert.glsl`, `dust-frag.glsl`)
  - vert: `offsetY = mod(position.y - time, area)` â†’ ë¬´í•œ ìœ„ë¡œ ìŠ¤í¬ë¡¤
  - vert: X/Z í”ë“¤ë¦¼: `sin(cos(offsetY*0.1) + sin(...))` â†’ ìì—°ìŠ¤ëŸ¬ìš´ ë¶€ìœ 
  - frag: `illumination = max(0, (radius - centerDist) / radius)` â†’ ì„ í˜• ê°ì‡ 
  - frag: alpha `illumination^2`
- **Texture:** 64Ã—64 ì†Œí”„íŠ¸ ë¸”ë¡­ (2-ring)
- **time ì—…ë°ì´íŠ¸:** `+= delta * 0.005` (ëŠë¦° ì†ë„)

---

### Phase 7 â€” ì¶”ê°€ í¬ìŠ¤íŠ¸í”„ë¡œì„¸ì‹±

**ì›ë³¸:** `MainScene.js` BloomPass + LensDirtPass + VignettePass

- **Vignette:** í™”ë©´ ê°€ì¥ìë¦¬ ì–´ë‘¡ê²Œ (`darkness 0.5, offset 1.25, edge color 0x07070C`)
- **LensDirt:** ë§ˆìš°ìŠ¤ í´ë¦­ ì‹œ ë Œì¦ˆ í”Œë ˆì–´ íš¨ê³¼ (ì„ íƒì )

---

## ğŸ—‚ ì°¸ê³  íŒŒì¼ ë§¤í•‘

| ì›ë³¸ ì…°ì´ë” | í˜„ì¬ êµ¬í˜„ | ìš©ë„ |
|---|---|---|
| `gel-frag.glsl` | `src/glsl/gel.frag` | âœ… rim ê¸€ë¡œìš° |
| `bulb-frag.glsl` | `src/glsl/bulb.frag` | âœ… UV íŒ¨í„´ íˆ¬ëª…ë„ |
| `tail-frag.glsl` | â€” | âŒ Tail + Mouth arms |
| `tentacle-frag.glsl` | â€” | âŒ ì´‰ìˆ˜ + ì™¸ê³½ ì™€ì´ì–´ |
| `dust-vert/frag.glsl` | â€” | âŒ ìˆ˜ì¤‘ íŒŒí‹°í´ |